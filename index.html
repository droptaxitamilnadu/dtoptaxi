<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Droptaxi Tamilnadu | Premium Intercity</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Poppins',sans-serif;
}

body{
  background:linear-gradient(135deg,#1E4FAF,#0D47A1);
  min-height:100vh;
}

/* HEADER */
header{
  background:#fff;
  padding:12px 20px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.call-btn{
  background:#FFC107;
  padding:8px 18px;
  border-radius:30px;
  font-weight:700;
  text-decoration:none;
  color:#000;
}

/* HERO */
.hero{
  text-align:center;
  padding:30px 20px;
  color:#fff;
}

.hero h1{
  font-size:22px;
  font-weight:800;
}

/* CARD */
.booking-card{
  background:#f4f4f4;
  margin:0 15px 30px;
  padding:25px;
  border-radius:20px;
  box-shadow:0 10px 30px rgba(0,0,0,0.2);
}

/* TOGGLE */
.toggle{
  display:flex;
  background:#ddd;
  border-radius:40px;
  overflow:hidden;
  margin-bottom:20px;
}

.toggle button{
  flex:1;
  padding:12px;
  border:none;
  background:transparent;
  font-weight:700;
  cursor:pointer;
}

.toggle .active{
  background:#1E4FAF;
  color:#fff;
}

/* INPUTS */
input, select{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:1px solid #ccc;
  background:#fff;
  margin-bottom:15px;
  font-size:14px;
}

.row{
  display:flex;
  gap:10px;
}

.row input,
.row select{
  flex:1;
  margin-bottom:15px;
}

/* BUTTON */
.book-btn{
  background:#FF6F00;
  color:#fff;
  width:100%;
  padding:15px;
  border:none;
  border-radius:14px;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
}
</style>
</head>

<body>

<header>
  <div><strong>Droptaxi Tamilnadu</strong></div>
  <a href="tel:9045450000" class="call-btn">ðŸ“ž 9045450000</a>
</header>

<div class="hero">
  <h1>Premium Intercity Taxi Service Across Tamilnadu</h1>
</div>

<div class="booking-card">

  <!-- Toggle -->
  <div class="toggle">
    <button id="onewayBtn" class="active" onclick="setTrip('oneway')">One Way</button>
    <button id="roundBtn" onclick="setTrip('round')">Round Trip</button>
  </div>

  <!-- Pickup -->
  <input type="text" id="pickup" placeholder="Pickup Location">

  <!-- Drop -->
  <input type="text" id="drop" placeholder="Drop Location">

  <!-- Pickup Date & Time -->
  <div class="row">
    <input type="date" id="pickupDate">
    <input type="time" id="pickupTime">
  </div>

  <!-- Return Date -->
  <div id="returnDateRow" style="display:none;">
    <input type="date" id="returnDate">
  </div>

  <!-- Name -->
  <input type="text" id="name" placeholder="Full Name">

  <!-- Country + Mobile -->
  <div class="row">
    <select id="code">
      <option value="+91">+91 India</option>
      <option value="+971">+971 UAE</option>
      <option value="+1">+1 USA</option>
      <option value="+44">+44 UK</option>
    </select>
    <input type="tel" id="mobile" placeholder="Mobile Number">
  </div>

  <button class="book-btn" onclick="submitBooking()">CHECK FARE</button>

</div>

<script>

let tripType = "oneway";

/* Toggle */
function setTrip(type){
  tripType = type;

  document.getElementById("onewayBtn").classList.remove("active");
  document.getElementById("roundBtn").classList.remove("active");

  if(type === "round"){
    document.getElementById("roundBtn").classList.add("active");
    document.getElementById("returnDateRow").style.display = "block";
  }else{
    document.getElementById("onewayBtn").classList.add("active");
    document.getElementById("returnDateRow").style.display = "none";
  }
}

/* Google Maps Autocomplete */
function initAutocomplete(){
  const options = {
    componentRestrictions: { country: "in" }
  };

  new google.maps.places.Autocomplete(document.getElementById("pickup"), options);
  new google.maps.places.Autocomplete(document.getElementById("drop"), options);

  /* Auto detect current location */
  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(function(position){
      const geocoder = new google.maps.Geocoder();
      const latlng = {
        lat: position.coords.latitude,
        lng: position.coords.longitude
      };
      geocoder.geocode({location: latlng}, function(results, status){
        if(status === "OK" && results[0]){
          document.getElementById("pickup").value = results[0].formatted_address;
        }
      });
    });
  }
}

/* Submit */
function submitBooking(){

  const pickup = document.getElementById("pickup").value;
  const drop = document.getElementById("drop").value;
  const date = document.getElementById("pickupDate").value;
  const time = document.getElementById("pickupTime").value;
  const returnDate = document.getElementById("returnDate").value;
  const name = document.getElementById("name").value;
  const code = document.getElementById("code").value;
  const mobile = document.getElementById("mobile").value;

  if(!pickup || !drop || !date || !time || !name || !mobile){
    alert("Please fill all required fields.");
    return;
  }

  const fullNumber = code + mobile;

  fetch("https://script.google.com/macros/s/AKfycbxlXVPjCy8DMtxlsW-F_-hhcVh_HZQAX8UhjTGWPKzESGVZ8qM-RDVwkVte0g443cr47A/exec",{
    method:"POST",
    body:JSON.stringify({
      name:name,
      contact:fullNumber,
      tripType:tripType,
      pickup:pickup,
      drop:drop,
      pickupDate:date,
      pickupTime:time,
      returnDate:returnDate
    })
  });

  /* Store for fare page */
  localStorage.setItem("bookingData", JSON.stringify({
    tripType, pickup, drop, pickupDate:date, pickupTime:time, returnDate
  }));

  window.location.href = "fare.html";
}

</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBXnBk1mKSeIF5_UNsLejhqUYFIbJqMXZk&libraries=places&callback=initAutocomplete" async defer></script>

</body>
</html>